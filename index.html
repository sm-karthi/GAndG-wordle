<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wordle</title>
</head>

<body>

    <script>
        let heading = document.createElement("h1");
        heading.innerText = "Wordle game"
        heading.style.textAlign = "center";
        document.body.appendChild(heading);

        let container = document.createElement("div");
        container.style.display = "flex";
        container.style.flexDirection = "column";
        container.style.gap = "15px";
        container.style.justifyContent = "center";
        container.style.alignItems = "center";

        let currentRow = 0;
        let currentBox = 0;

        let rowArray = [];
        for (let i = 0; i < 7; i++) {
            let row = document.createElement("div");
            row.style.display = "flex";
            row.style.gap = "5px"

            let boxes = [];
            for (let j = 0; j < 5; j++) {
                let box = document.createElement("div");
                box.style.width = "50px";
                box.style.height = "50px";
                box.style.border = "1px solid black";
                box.style.textAlign = "center";
                box.style.borderRadius = "5px";
                box.style.lineHeight = "50px"; 
                box.style.fontSize = "20px";
                box.style.fontWeight = "bold";



                boxes.push(box);
                row.appendChild(box);
            }

            rowArray.push(boxes);
            container.appendChild(row);
        }

        document.body.appendChild(container);




        let wordList = [
            "apple", "grape", "peach", "berry", "melon",
            "brave", "charm", "crane", "doubt", "eagle",
            "fancy", "glove", "heart", "ideal", "jelly",
            "knife", "lucky", "magic", "noble", "ocean",
            "piano", "queen", "radio", "scale", "tiger",
            "umbra", "vivid", "whale", "xenon", "young",
            "zebra", "alert", "brick", "climb", "dream",
            "event", "flood", "giant", "honey", "index",
            "jumps", "kneel", "laugh", "motel", "night",
            "orbit", "plant", "quiet", "rider", "shine"
        ];


        let targetWord = wordList[Math.floor(Math.random() * wordList.length)];
        console.log(targetWord);


        function handleGuessWord() {

            let word = "";
            for (let i = 0; i < 5; i++) {
                word += rowArray[currentRow][i].innerText;

            }
            console.log(word);


            for (let i = 0; i < 5; i++) {
                let box = rowArray[currentRow][i];

                let letter = word[i].toLowerCase();

                if (letter === targetWord[i]) {
                    box.style.backgroundColor = "green";
                    box.style.color = "white";

                }
                else if (targetWord.includes(letter)) {
                    box.style.backgroundColor = "#e0c331";
                    box.style.color = "black";

                }
                else {
                    box.style.backgroundColor = "gray";
                    box.style.color = "white";

                }
            }


            currentRow++;
            currentBox = 0;

            if (word.toLowerCase() === targetWord) {
                alert("Congralations! you win!");
                pageReload();
            }
            else if (currentRow === 7) {
                alert("Game over!");
                pageReload();
            }



        }



        document.addEventListener("keydown", function (event) {
            if (event.key.length === 1 && currentRow < 7 && currentBox < 5) {
                let box = rowArray[currentRow][currentBox];

                box.innerText = event.key.toUpperCase();


                currentBox++;
            }
            else if (event.key === "Enter" && currentBox === 5) {
                handleGuessWord();
            }
            else if (event.key === "Backspace" && currentBox > 0) {
                currentBox--;
                let box = rowArray[currentRow][currentBox];
                box.innerText = "";
            }
        });





        let buttonAndInput = document.createElement("div");
        buttonAndInput.style.display = "flex";
        buttonAndInput.style.justifyContent = "center";
        buttonAndInput.style.alignItems = "center";
        buttonAndInput.style.gap = "40px"
        buttonAndInput.style.marginTop = "50px"

        let guessBtn = document.createElement("button");
        guessBtn.innerText = "Guess";
        guessBtn.style.padding = "5px";
        guessBtn.style.borderRadius = "5px";
        guessBtn.style.backgroundColor = "#2eb338"
        guessBtn.style.color = "white";
        guessBtn.style.cursor = "pointer";

        guessBtn.onmouseenter = function () {
            guessBtn.style.backgroundColor = "#3b8240"
        };

        guessBtn.onmouseleave = function () {
            guessBtn.style.backgroundColor = "#2eb338";
        };

        buttonAndInput.appendChild(guessBtn);
        document.body.appendChild(buttonAndInput);

        guessBtn.onclick = function () {
            handleGuessWord();
        }


        function pageReload() {

            setTimeout(function () {
                window.location.reload();
            }, 2000);
        }




    </script>
</body>

</html>